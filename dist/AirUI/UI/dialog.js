Air.Module("AirUI.UI.dialog",function(require){var t=require("AirUI.UI.popWindow"),o=function(t,n,c,s){t!==c&&t!==document.body&&(-1!==t.className.indexOf(n)?s(t):o(t.parentNode,n,c,s))},n=function(c){function s(){p.dialog=d.root,p.dialog.id="c-dialog",beacon(p.dialog).on("click",function(e){var t=e.target||e.srcElement;o(t,"js-close",p.dialog,function(t){a.close()})})}function l(){var t=a.content;"string"!=typeof t&&(t.style.display="none",document.body.appendChild(t),-1===b.indexOf(t)&&b.push(t))}if(c=c||{},!(this instanceof n))return new n(c);var a=this,d=new t({onClose:function(){l()},needMask:c.needMask});this.content="";var b=[],p={};this.show=function(t){t=t||{};var n="string"==typeof t.title?t.title:"消息提示",c=t.content,s="boolean"==typeof t.bottomBtns?t.bottomBtns:!1,l='<div class="pdb-bgm"></div><div class="pdb-main"><div class="pdb-title "><h4>'+n+'</h4><div class="border-out"><p class="border-in"><span class="js-close close icon icon-close"  title="关闭浮层">关闭</span></p></div></div><div class="pdb-content"><div class="pdb-contentframe">'+("string"==typeof c?c:"")+'</div></div><div class="pdb-bottom '+(s?"":"hidden")+' textcenter">'+(s?'<a class="dialog-btn btn-action js-ok"><em>确定</em></a><a class="dialog-btn btn-cancel js-cancel"><em>取消</em></a>':"")+"</div></div>";a.content=c,d.show(l),setTimeout(function(){var n=p.dialog;p.main=n.querySelector(".pdb-main"),p.bgm=n.querySelector(".pdb-bgm"),p.bodyWrap=n.querySelector(".pdb-content"),p.body=p.bodyWrap.querySelector(".pdb-contentframe"),c&&1===c.nodeType&&(p.body.appendChild(c),c.style.display="block"),p.titleWrap=n.querySelector(".pdb-title"),p.close=n.querySelector(".close"),p.bottom=n.querySelector(".pdb-bottom"),beacon(p.bottom).once("click",function(e){var n=e.target||e.srcElement;o(n,"js-ok",p.dialog,function(o){t.okAction&&t.okAction(o),a.close()}),o(n,"js-cancel",p.dialog,function(o){t.cancelAction&&t.cancelAction(o),a.close()})}),p.bodyWrap.style.height=p.body.offsetHeight+"px";var s=p.titleWrap.offsetHeight+p.bodyWrap.offsetHeight+p.bottom.offsetHeight;p.main.style.height=s+"px",p.bgm.style.height=s+"px";var l=p.main.offsetWidth;n.style.left=document.body.offsetWidth/2-l/2+"px",n.style.top=window.innerHeight/2-s/2+"px"},0)},this.close=function(){d.close(),l()},this.root=p.dialog,s()};return n});